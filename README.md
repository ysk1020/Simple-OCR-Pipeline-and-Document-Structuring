 # Simple OCR Pipeline and Document Structuring

This repository provides a lightweight OCR pipeline and document-structuring tools focused on invoice/receipt-style documents. It includes preprocessing, OCR (Tesseract engine), layout-aware postprocessing, key/value extraction, and export/visualization utilities.

**Features**
- **Preprocessing:** image binarization and basic cleanup (`src/preprocess/`).
- **OCR Engine:** Tesseract integration (`src/ocr/tesseract_engine.py`).
- **Document Structuring:** simple key-value extraction and layout-aware grouping (`src/structure/`).
- **Exporters:** write structured outputs to CSV and JSON (`src/export/to_csv.py`, `src/export/to_json.py`).
- **Visualization:** annotated images for debugging and inspection (`src/visualize/annotate.py`).

**Repository**
- **Run script:** [run.py](run.py) — top-level entry for quick experiments.
- **OCR implementations:** [src/ocr/](src/ocr/) — engines and base classes.
- **Preprocessing:** [src/preprocess/](src/preprocess/) — image cleaning helpers.
- **Structuring:** [src/structure/](src/structure/) — key/value extraction logic.
- **Export & Visualize:** [src/export/](src/export/) and [src/visualize/](src/visualize/).

**Data layout**
- `data/raw/SROIE2019/` — example dataset layout (contains `train/`, `test/`, tokenizers, and label files).
- `results/` — structured outputs (CSV/JSON) generated by the pipeline.
- `output/annotated_images/` — visual debugging images produced by the visualizer.

**Quick start**
1. Create a virtual environment and install dependencies:

	```bash
	python3 -m venv venv
	source venv/bin/activate
	pip install -r requirements.txt
	```

2. Run the pipeline (simple example):

	```bash
	python run.py
	```

	The behavior and input/output folders can be adjusted editing `run.py`.

3. Run a basic test script:

	```bash
	python test_ocr.py
	```

**Outputs**
- Structured results are written to `results/` as CSV and JSON per document.
- Annotated images for inspection are saved under `output/annotated_images/`.

**How the pipeline works (high level)**
1. Images are preprocessed (binarization, cleanup).
2. OCR is run to extract text and bounding boxes.
3. A lightweight structuring module groups tokens and extracts key/value pairs.
4. Results are exported and optionally visualized.
